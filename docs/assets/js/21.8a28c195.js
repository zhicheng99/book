(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{298:function(t,n,e){"use strict";e.r(n);var a=e(10),l=Object(a.a)({},(function(){var t=this.$createElement,n=this._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}},[n("h1",{attrs:{id:"上传视频文件组件uploadvideo-vue-基于element-ui"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#上传视频文件组件uploadvideo-vue-基于element-ui"}},[this._v("#")]),this._v(" 上传视频文件组件UploadVideo.vue 基于element-ui")]),this._v(" "),n("p",[n("img",{attrs:{src:"Public/upload/2020-08-07/202008072128004298.png",alt:"5f2d56dabb3f8.png"}})]),this._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[this._v('<template>\n\t<div>\n\t\t<el-input size="small" v-model="uploadVideo" @input="input" placeholder="上传新视频"> \n\n\t\t\t<template slot="append">\n\t\t\t\t<el-upload\n\t\t\taction="/admin/file/uploadVideoFile?module=dc_video"\n\t\t\taccept=".mov,.mp4,.m4a,.3gp,.3g2"\n\t\t\t:show-file-list="false"\n\t\t\t:on-success="handletopSuccess"\n\t\t\t:before-upload="handleBeforeUpload"\n\t\t\t:on-error="handleUploadError"\n\t\t>\n\t\t\t<el-button size="small" type="primary" :loading="dialogLoaidng">选择视频</el-button>\n\t\t</el-upload>\n\t\t\t</template>\n\n\t\t</el-input>\n\t</div>\n</template>\n<script>\n\texport default{\n\t\tcomponents:{},\n\t\tprops:[\'uploadVideo\',\'uploadCover\'],\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tdialogLoaidng:false\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\tinput:function(){\n\t\t\t\tthis.$nextTick(()=>{\n\n\n\t\t\t\t\tthis.$emit(\'update:uploadVideo\',this.uploadVideo);\n\n\n\t\t\t\t})\n\t\t\t},\n\t\t\thandleBeforeUpload() {\n\t\t\t\tthis.dialogLoaidng = true;\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\thandleUploadError() {\n\t\t\t\tthis.dialogLoaidng = false;\n\t\t\t},\n\t\t\thandletopSuccess(res, file) {\n\t\t\t\tthis.dialogLoaidng = false;\n\t\t\t\tlet { code, msg, obj } = res;\n\t\t\t\tif (code == \'00\') {\n\t\t\t\t\tlet urls = obj.split(\'#\');\n\n\t\t\t\t\tthis.$emit(\'update:uploadVideo\',urls[0]);\n\t\t\t\t\tthis.$emit(\'update:uploadCover\',urls[1]);\n \n\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\ttype: \'success\',\n\t\t\t\t\t\tmessage: \'上传成功\',\n\t\t\t\t\t});\n\n\t\t\t\t\t// this.$nextTick(()=>{\n\t\t\t\t\t// \tthis.$refs.addtopForm.validateField(\'videoUrl\');\n\t\t\t\t\t// })\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\t\tmounted(){\n\n\t\t},\n\t\tcreated(){\n\n\t\t},\n\t\tcomputed:{\n\n\t\t},\n\t\twatch:{\n\n\t\t}\n\t}\n\n<\/script>\n<style scoped>\n\n</style>\n')])])]),n("backTop")],1)}),[],!1,null,null,null);n.default=l.exports}}]);