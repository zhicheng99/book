(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{380:function(t,a,r){"use strict";r.r(a);var s=r(10),v=Object(s.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"shell脚本提取字符串的几种方式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#shell脚本提取字符串的几种方式"}},[t._v("#")]),t._v(" [shell脚本提取字符串的几种方式]")]),t._v(" "),r("p",[t._v("使用grep+sed+awk，查找编辑和输出。")]),t._v(" "),r("p",[t._v("例子：取得droped字段的值")]),t._v(" "),r("p",[t._v("原始输出")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("# show capture\n[0 pflow]:     Interface:zc:1@1(12580)\n        RX packets:29021 dropped:0\n        RX bit/sec:0.00(Mbps) pkt/sec:0.00(pps)\n")])])]),r("p",[t._v("获取指定字段值")]),t._v(" "),r("pre",[t._v("value="),r("span",{staticStyle:{color:"rgba(0, 0, 0, 1)"}},[t._v("`show capture`\n")]),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("echo")]),t._v(" "),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v('"')]),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v("$value")]),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v('"')]),t._v(" | "),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("grep")]),t._v(" "),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v('"')]),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v("dropped")]),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v('"')]),t._v(" | "),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("sed")]),t._v(" "),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v("'")]),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v("s/:/ /g")]),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v("'")]),t._v(" | "),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("awk")]),t._v(" "),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v("'")]),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v("{print $5}")]),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v("'")])]),t._v(" "),r("p",[t._v("说明：使用grep找到字符串所在行，使用sed把冒号替换为空格，使用awk获取想要的字符串")]),t._v(" "),r("ol",{attrs:{start:"2"}},[r("li",[t._v("使用sed正则表达式提取字符串")])]),t._v(" "),r("p",[t._v("提取数字")]),t._v(" "),r("pre",[t._v("[admin]# "),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("echo")]),t._v(" here365test666 | "),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("sed")]),t._v(" "),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v('"')]),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v("s/.*ere([0-9]*)test([0-9]*)/1 2/g")]),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v('"')]),t._v("\n"),r("span",{staticStyle:{color:"rgba(128, 0, 128, 1)"}},[t._v("365")]),t._v(" "),r("span",{staticStyle:{color:"rgba(128, 0, 128, 1)"}},[t._v("666")])]),t._v(" "),r("p",[t._v("s表示替换，1和2分别表示用第一个括号和第二个括号里面的内容，空格需要转义。sed支持*，不支持?、+，不能用d之类，正则支持有限。")]),t._v(" "),r("p",[t._v("整个sed表达式的作用是：用提取出的数字替换原来的字符串。")]),t._v(" "),r("ol",{attrs:{start:"3"}},[r("li",[t._v("字符串变量截取")])]),t._v(" "),r("p",[r("strong",[t._v("这种方式需要把字符串存在一个变量中。")])]),t._v(" "),r("p",[t._v("我们对以上 8 种格式做一个汇总，请看下表：")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("格式")]),t._v(" "),r("th",[t._v("说明")]),t._v(" "),r("th",[t._v("举例")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("${string: start :length}")]),t._v(" "),r("td",[t._v("从 string 字符串的左边第 start 个字符开始，向右截取 length 个字符。")]),t._v(" "),r("td",[t._v("[root]# var=HelloWorld [root]# echo ${var:0:5} Hello")])]),t._v(" "),r("tr",[r("td",[t._v("${string: start}")]),t._v(" "),r("td",[t._v("从 string 字符串的左边第 start 个字符开始截取，直到最后。")]),t._v(" "),r("td",[t._v("[root]# echo ${var:5} World")])]),t._v(" "),r("tr",[r("td",[t._v("${string: 0-start :length}")]),t._v(" "),r("td",[t._v("从 string 字符串的右边第 start 个字符开始，向右截取 length 个字符。")]),t._v(" "),r("td",[t._v("[root]# echo ${var:0-5:3}  Wor")])]),t._v(" "),r("tr",[r("td",[t._v("${string: 0-start}")]),t._v(" "),r("td",[t._v("从 string 字符串的右边第 start 个字符开始截取，直到最后。")]),t._v(" "),r("td",[t._v("[root]# echo ${var:0-5} World")])]),t._v(" "),r("tr",[r("td",[t._v("${string#*chars}")]),t._v(" "),r("td",[t._v("从 string 字符串第一次出现 *chars 的位置开始，截取 *chars 右边的所有字符。")]),t._v(" "),r("td",[t._v("[root]# echo ${var#*l} loWorld")])]),t._v(" "),r("tr",[r("td",[t._v("${string##*chars}")]),t._v(" "),r("td",[t._v("从 string 字符串最后一次出现 *chars 的位置开始，截取 *chars 右边的所有字符。")]),t._v(" "),r("td",[t._v("[root]# echo ${var##*l} d")])]),t._v(" "),r("tr",[r("td",[t._v("${string%chars*}")]),t._v(" "),r("td",[t._v("从 string 字符串第一次出现 chars* 的位置开始，截取 chars* 左边的所有字符。")]),t._v(" "),r("td",[t._v("[root]# echo ${var%l*} HelloWor")])]),t._v(" "),r("tr",[r("td",[t._v("${string%%chars*}")]),t._v(" "),r("td",[t._v("从 string 字符串最后一次出现 chars* 的位置开始，截取 chars* 左边的所有字符。")]),t._v(" "),r("td",[t._v("[root]# echo ${var%%l*} He")])])])]),t._v(" "),r("ol",{attrs:{start:"4"}},[r("li",[t._v("cut")])]),t._v(" "),r("p",[t._v("与第3点对应，"),r("strong",[t._v("cut用来直接截取字符串，不需要把字符串存在变量中")]),t._v("。")]),t._v(" "),r("p",[t._v("cut可以按照字符、字节、列截取数据。")]),t._v(" "),r("p",[t._v("原始文件")]),t._v(" "),r("pre",[t._v("[root]# "),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("cat")]),t._v(" test."),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("sh")]),r("span",{staticStyle:{color:"rgba(0, 0, 0, 1)"}},[t._v(" \nabc ")]),r("span",{staticStyle:{color:"rgba(128, 0, 128, 1)"}},[t._v("123 zz")]),r("span",{staticStyle:{color:"rgba(0, 0, 0, 1)"}},[t._v("\ndfg ")]),r("span",{staticStyle:{color:"rgba(128, 0, 128, 1)"}},[t._v("457 yy")])]),t._v(" "),r("ol",[r("li",[t._v("输出第2、3个字符")])]),t._v(" "),r("pre",[t._v("[root]# "),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("cat")]),t._v(" test."),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("sh")]),t._v(" | "),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("cut")]),t._v(" -c2-"),r("span",{staticStyle:{color:"rgba(128, 0, 128, 1)"}},[t._v("3")]),r("span",{staticStyle:{color:"rgba(0, 0, 0, 1)"}},[t._v("\nbc\nfg")])]),t._v(" "),r("ol",{attrs:{start:"2"}},[r("li",[t._v("与【awk】类似，输出指定列")])]),t._v(" "),r("pre",[t._v("[root@skyeye admin]# "),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("cat")]),t._v(" test."),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("sh")]),t._v(" | "),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("cut")]),t._v(" -d "),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v('"')]),t._v(" "),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v('"')]),t._v(" -"),r("span",{staticStyle:{color:"rgba(0, 0, 0, 1)"}},[t._v("f2\n")]),r("span",{staticStyle:{color:"rgba(128, 0, 128, 1)"}},[t._v("123")]),t._v("\n"),r("span",{staticStyle:{color:"rgba(128, 0, 128, 1)"}},[t._v("457")])]),t._v(" "),r("ol",{attrs:{start:"5"}},[r("li",[t._v("tr")])]),t._v(" "),r("p",[t._v("tr主要是替换字符串。")]),t._v(" "),r("ol",[r("li",[t._v("最常见的场景就是压缩空白格")])]),t._v(" "),r("pre",[t._v("[root]# "),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("echo")]),t._v(" "),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v("'")]),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v("hello           123              world             456 !!!")]),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v("'")]),t._v(" | "),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("tr")]),t._v(" -s "),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v("'")]),t._v(" "),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v("'")]),r("span",{staticStyle:{color:"rgba(0, 0, 0, 1)"}},[t._v("\nhello ")]),r("span",{staticStyle:{color:"rgba(128, 0, 128, 1)"}},[t._v("123")]),t._v(" world "),r("span",{staticStyle:{color:"rgba(128, 0, 128, 1)"}},[t._v("456")]),t._v(" !!!")]),t._v(" "),r("p",[t._v("-s参数指定要压缩的内容为空格")]),t._v(" "),r("ol",{attrs:{start:"2"}},[r("li",[t._v("与【sed】类似，替换和删除字符串")])]),t._v(" "),r("p",[t._v("例如制表符替换为空格")]),t._v(" "),r("p",[r("img",{attrs:{src:"Public/upload/20230803/16910536006.gif",alt:"复制代码"}})]),t._v(" "),r("pre",[t._v("[root@skyeye admin]# "),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("cat")]),t._v(" test."),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("sh")]),r("span",{staticStyle:{color:"rgba(0, 0, 0, 1)"}},[t._v(" \nabc    ")]),r("span",{staticStyle:{color:"rgba(128, 0, 128, 1)"}},[t._v("123")]),r("span",{staticStyle:{color:"rgba(0, 0, 0, 1)"}},[t._v("    zz\ndfg    ")]),r("span",{staticStyle:{color:"rgba(128, 0, 128, 1)"}},[t._v("457")]),r("span",{staticStyle:{color:"rgba(0, 0, 0, 1)"}},[t._v("    yy\n[root@skyeye admin]# ")]),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("cat")]),t._v(" test."),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("sh")]),t._v(" | "),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("tr")]),t._v(" "),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v('"')]),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v("t")]),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v('"')]),t._v(" "),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v('"')]),t._v(" "),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v('"')]),r("span",{staticStyle:{color:"rgba(0, 0, 0, 1)"}},[t._v("\nabc ")]),r("span",{staticStyle:{color:"rgba(128, 0, 128, 1)"}},[t._v("123")]),r("span",{staticStyle:{color:"rgba(0, 0, 0, 1)"}},[t._v(" zz\ndfg ")]),r("span",{staticStyle:{color:"rgba(128, 0, 128, 1)"}},[t._v("457")]),t._v(" yy")]),t._v(" "),r("p",[r("img",{attrs:{src:"Public/upload/20230803/16910536006.gif",alt:"复制代码"}})]),t._v(" "),r("p",[t._v("例如删除数字")]),t._v(" "),r("p",[r("img",{attrs:{src:"Public/upload/20230803/16910536006.gif",alt:"复制代码"}})]),t._v(" "),r("pre",[t._v("[root@skyeye admin]# "),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("cat")]),t._v(" test."),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("sh")]),r("span",{staticStyle:{color:"rgba(0, 0, 0, 1)"}},[t._v(" \nabc    ")]),r("span",{staticStyle:{color:"rgba(128, 0, 128, 1)"}},[t._v("123")]),r("span",{staticStyle:{color:"rgba(0, 0, 0, 1)"}},[t._v("    zz\ndfg    ")]),r("span",{staticStyle:{color:"rgba(128, 0, 128, 1)"}},[t._v("457")]),r("span",{staticStyle:{color:"rgba(0, 0, 0, 1)"}},[t._v("    yy\n[root@skyeye admin]# ")]),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("cat")]),t._v(" test."),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("sh")]),t._v(" | "),r("span",{staticStyle:{color:"rgba(0, 0, 255, 1)"}},[t._v("tr")]),t._v(" -d "),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v('"')]),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v("{0-9}")]),r("span",{staticStyle:{color:"rgba(128, 0, 0, 1)"}},[t._v('"')]),r("span",{staticStyle:{color:"rgba(0, 0, 0, 1)"}},[t._v("\nabc        zz\ndfg        yy")])]),t._v(" "),r("p",[r("img",{attrs:{src:"Public/upload/20230803/16910536006.gif",alt:"复制代码"}})]),t._v(" "),r("p",[t._v("文章来源：https://www.cnblogs.com/superbaby11/p/17007867.html")]),t._v(" "),r("backTop")],1)}),[],!1,null,null,null);a.default=v.exports}}]);