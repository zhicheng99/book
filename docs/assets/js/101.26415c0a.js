(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{356:function(t,n,e){"use strict";e.r(n);var s=e(10),a=Object(s.a)({},(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"大图预览-点击放大弹出-关闭缩回原位置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#大图预览-点击放大弹出-关闭缩回原位置"}},[t._v("#")]),t._v(" 大图预览（点击放大弹出，关闭缩回原位置）")]),t._v(" "),e("p",[t._v("调用方式")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('\t<PopCover ref="pop"></PopCover>\n')])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("\t\t\tthis.$refs.pop.setTransformOrigin(perx*100+'%'+' '+pery*100+'%','图片地址');\n")])])]),e("p",[t._v("PopCover.vue")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("<template>\n\t<div class=\"start\" v-bind:class=\"{'ani':ani!=''}\" v-bind:style=\"{ \n        'transformOrigin':transformOrigin,\n        'transform':transform\n    }\">\n  \n    \t<iframe ref=\"iframe\" src=\"/pop\" width=\"100%\" height=\"100%\" frameborder=\"0\"></iframe>\n    </div>\n</template>\n<script>\n\texport default{\n\t\tcomponents:{},\n\t\tprops:[],\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tt:'start',\n\t            left:'0px',\n\t            top:'0px',\n\t            width:'10px',\n\t            height:'10px',\n\t            ani:'',\n\n\t            transformOrigin:'50% 50%',\n\t            transform:'translate3d(0,0,0) scale(0)',\n\n\n\t           \tdoing:false,  //是否正在动画过程中\n\n\t           \tstatus:'mini'  //none：没显示 normal:已显示\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\tsetTransformOrigin:function(v,imgUrl){\n\n\t\t\t\tif(this.doing && (this.status == 'normal')){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tdocument.body.style.overflow = 'hidden';\n\n\t\t\t\tthis.ani = '';\n\t\t\t\tthis.doing = true;\n\t\t\t\tthis.status = 'normal'\n\n\t\t\t\tthis.transformOrigin = v;\n\n\t\t\t\t//给iframe发消息\n\t\t\t\tthis.$refs.iframe.contentWindow.postMessage(imgUrl,'*');\n\n\t\t\t\tsetTimeout(_=>{\n\n\t\t\t\t\tthis.setTransform();\n\n\t\t\t\t},200)\n\t\t\t},\n\t\t\tsetTransform:function(){  \n \n\t\t\t\tthis.ani = 'ani';\n\t\t\t\tthis.transform = 'translate3d(0,0,0) scale(1)';\n\n\t\t\t\tsetTimeout(_=>{\n\n\t\t\t\t\tthis.doing = false;\n\n\t\t\t\t},1000)\n\t\t\t},\n\t\t\tfadeOut:function(){\n\n\t\t\t\tif(this.doing){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tthis.doing = true;\n\t\t\t\tthis.transform = 'translate3d(0,0,0) scale(0)'\n\n\n\t\t\t\tsetTimeout(_=>{\n\t\t\t\t\tdocument.body.style.overflow = 'auto';\n\n\t\t\t\t\tthis.ani = '';\n\t\t\t\t\tthis.doing = false;\n\t\t\t\t\tthis.status = 'none';\n\t\t\t\t\tthis.$refs.iframe.contentWindow.postMessage('clear','*');\n\n\n\t\t\t\t},1100);\n\n\t\t\t}\n\t\t},\n\t\tmounted(){\n\n\t\t\twindow.addEventListener(\"message\", (e)=>\n\t\t\t{\n\t\t\t\tif(e.data == 'close'){\n\t\t\t\t\tthis.fadeOut();\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tcreated(){\n\n\t\t},\n\t\tcomputed:{\n\n\t\t},\n\t\twatch:{\n\n\t\t}\n\t}\n\n<\/script>\n<style scoped>\n\n.start{\n    position: fixed;\n    left:0;\n    top:0;\n    background: rgba(0,0,0,0.5);\n    width: 100%;\n    height: 100%;\n    z-index: 4;\n}\n.ani{\n transition: all 0.8s;\n-moz-transition:  all 0.8s;/* Firefox 4 */\n-webkit-transition: all 0.8s;/* Safari 和 Chrome */\n-o-transition:  all 0.8s; /* Opera */\n}\n\niframe{\n\tborder:none;\n\toverflow: hidden;\n\t-webkit-transform: translate3d(0,0,0);\n\t-ms-transform: translate3d(0,0,0);\n\t-o-transform: translate3d(0,0,0);\n\ttransform: translate3d(0,0,0);\n}\n</style>\n")])])]),e("p",[t._v("Pop.vue")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("<template>\n\t<div>\n\n\t\t <el-image-viewer\n        v-if=\"showViewer\"\n        :on-close=\"close\"\n        :url-list=\"viewUrl\" \n         />\n\t</div>\n</template>\n<script>\nimport ElImageViewer from 'element-ui/packages/image/src/image-viewer';\n\n\texport default{\n\t\tcomponents:{ElImageViewer},\n\t\tprops:[],\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tshowViewer:false,\n\t\t\t\tviewUrl:[]\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\tclose:function(){\n\t\t\t\twindow.parent.postMessage('close','*');\n\t\t\t}\n\t\t},\n\t\tmounted(){\n\n\t\t\twindow.addEventListener(\"message\", (e)=>\n\t\t\t{\n\t\t\t\tif(e.data == 'clear'){\n\t\t\t\t\tthis.showViewer = false;\n\t\t\t\t\tthis.viewUrl = [];\n\t\t\t\t}else{\n\n\t\t\t\tthis.viewUrl = [e.data];\n\t\t\t\tthis.showViewer = true;\n\t\t\t\t}\n\t\t\t})\n\n\n\t\t},\n\t\tcreated(){\n\n\t\t},\n\t\tcomputed:{\n\n\t\t},\n\t\twatch:{\n\n\t\t}\n\t}\n\n<\/script>\n<style scoped>\n\n</style>\n")])])]),e("backTop")],1)}),[],!1,null,null,null);n.default=a.exports}}]);