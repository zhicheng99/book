(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{311:function(t,n,e){"use strict";e.r(n);var i=e(10),l=Object(i.a)({},(function(){var t=this.$createElement,n=this._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}},[n("h1",{attrs:{id:"el-form表单携带上传的excel文件做提交"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#el-form表单携带上传的excel文件做提交"}},[this._v("#")]),this._v(" el-form表单携带上传的excel文件做提交")]),this._v(" "),n("p",[n("img",{attrs:{src:"Public/upload/2020-11-05/5fa3d0431cca3.png",alt:"5fa3d0431cca3.png"}})]),this._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[this._v('<template>\n\t<div>\n\t\t <el-dialog title="导入评审案例" :visible.sync="show" @close="close" >\n\t\t \t<div  v-loading="loading">\n\t\t \t<el-form :model="importForm" :rules="importFormRules"  ref="importForm">\n\n\t\t\t\t<el-form-item label="数据文件:" :label-width="formLabelWidth" prop="file">\n\t\t\t\t\t<el-upload class="upload-demo" ref="upload" action="/offices/api/admin/system/uploadFile"\n\t\t\t\t\t :file-list="file" \n\t\t\t\t\t limit="1"\n\t\t\t\t\t :auto-upload="false" \n\t\t\t\t\t :on-remove="fileRemove" \n\t\t\t\t\t :on-change="fileChange" \n\t\t\t\t\t :on-success="uploadSuccess"\n\t\t\t\t\t :before-upload="beforeUpload"\n\t\t\t\t\t :on-exceed="overNum"\n\n\n\t\t\t\t\t accept="application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet">\n\t\t\t\t\t\t<el-button slot="trigger" size="small" icon="el-icon-upload">选择文件</el-button>\n\t\t\t\t\t\t\x3c!-- <el-button size="small" @click="submitUpload" icon="el-icon-upload2">上传</el-button> --\x3e\n\n\t\t\t\t\t\t<div slot="tip" class="el-upload__tip">只允许上传xls/xlsx文件</div>\n\t\t\t\t\t</el-upload>\n\t\t\t\t\t<div style="height: 0; overflow: hidden;">\n\t\t\t\t\t\t<el-input v-model="importForm.file" placeholder=""></el-input>\n\t\t\t\t\t</div>\n\n\n\t\t\t\t\t<a href="/case/admin/reviewData/case/exportModelFile\n" target="_blank"><i class="el-icon-download"></i>下载模板</a>\n\n\n\t\t\t\t</el-form-item>\n\t\t\t\t \n\t\t\t\t<el-form-item :label-width="formLabelWidth">\n\t\t\t\t\t<el-button @click="close" size="small">取消</el-button>\n\t\t \t\t\t<el-button type="primary" @click="addSubmit"  size="small">导入</el-button>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t \t</div>\n\n\n\t\t</el-dialog>\n\t</div>\n</template>\n<script>\n\timport config from \'../common/js/config.js\';\n\n\texport default{\n\t\tcomponents:{},\n\t\tprops:[\'isShow\',\'actId\',\'callBack\'],\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\ttoolLabelWidth:config.toolbarLabelWidth,\n\t\t\t\tformLabelWidth:config.dialogLabelWidth,\n\n\t\t\t\tshow:false,\n\t\t\t\timportFormVisible:false,\n\t\t\t\timportForm:{\n\t\t\t\t\tpid:\'\',\n\t\t\t\t\tfile:\'\'\n\n\t\t\t\t},\n\t\t\t\timportFormRules:{\n\t\t\t\t\tfile:[\n\t\t\t\t\t\t{ required: true, message: \'请上传文件\', trigger: \'blur\' }\n\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tloading:false\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\tclose:function(){\n\t\t\t\tthis.$emit(\'update:isShow\',false);\n\t\t\t},\n\t\t\taddSubmit:function(){\n\n\t\t\t\tthis.$refs.importForm.validate((valid) => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tthis.$confirm(\'确认提交吗？\', \'提示\', {}).then(() => {\n\n\t\t\t\t\t\t\tthis.loading = true;\n\n\t\t\t\t\t\t\tthis.$postWithFile(\'/admin/reviewData/case/improtData\',this.importForm).then(({code})=>{\n\n\t\t\t\t\t\t\t\t\t(code == \'00\') && (()=>{\n\n\t\t\t\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\t\t\t\tmessage:\'导入成功！\',\n\t\t\t\t\t\t\t\t\t\t\ttype:\'success\'\n\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\tthis.callBack && this.callBack();\n\t\t\t\t\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\t\t\t\t\tthis.close();\n\n\t\t\t\t\t\t\t\t\t})() || (this.loading = false);\n\n\t\t\t\t\t\t\t})\n\n\n\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t},\n\t\t\tfileRemove:function(){\n\t\t\t\tthis.importForm.file = \'\';\n\t\t\t},\n\t\t\tfileChange:function(file){\n\n\t\t\t\tthis.importForm.file = file.raw;\n\n\t\t\t\tthis.$nextTick(()=>{\n\n\t\t\t\t\tthis.$refs.importForm.validateField(\'file\');\n\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tmounted(){\n\t\t},\n\t\tcreated(){\n\n\t\t},\n\t\tcomputed:{\n\n\t\t},\n\t\twatch:{\n\t\t\t\'actId\':function(){\n\t\t\t\tthis.importForm.pid = this.actId;\n\n\t\t\t},\n\t\t\t\'isShow\':function(v){\n\t\t\t\tthis.show = v;\n\t\t\t}\n\n\t\t}\n\t}\n\n<\/script>\n<style scoped>\na {\n\t \tcolor: #F08450;\n\t }\n</style>\n')])])]),n("backTop")],1)}),[],!1,null,null,null);n.default=l.exports}}]);