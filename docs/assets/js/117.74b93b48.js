(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{369:function(n,i,s){"use strict";s.r(i);var o=s(10),t=Object(o.a)({},(function(){var n=this,i=n.$createElement,s=n._self._c||i;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"微信游览器-解决安卓和ios自动播放音乐"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微信游览器-解决安卓和ios自动播放音乐"}},[n._v("#")]),n._v(" 微信游览器，解决安卓和ios自动播放音乐")]),n._v(" "),s("p",[n._v("弄巧成拙，解决了安卓和ios不可自动播放的问题，需要借助插件，这是目前找到的方法，如还能改进或有更好的方法还请分享。\nhtml代码，用于苹果的音乐播放")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("<audio src=\"music.mp3\"  loop id=\"music\"></audio></pre> 插件引用\n\n<script src=\"jquery-1.10.1.min.js\"><\/script>\n\n<script src=\"pixi.min.js\"><\/script>\n\n<script src=\"pixi-sound.js\"><\/script>\n\n因为安卓无法用WeixinJSBridgeReady播放，发现之前有一个H5小游戏，在pixi-sound的借助下可以自动播放。pixi-sound需要pixi才可以使用。\n\n这里送上传送门：\nhttps://pixijs.download/v5.3.9/pixi.min.js下载pixi，pixi是H5游戏渲染引擎。\nRelease v2.1.2 · pixijs/sound · GitHub 用的这个版本，太新的版本不兼容\nGitHub - pixijs/sound: WebAudio API playback library, with filters. Modern audio playback for modern browsers. 可上pixi-sound git查看使用方法，里面有demo可以下载。\n\n// 判断机型是否是安卓机型，不然就是苹果机型\nvar u = navigator.userAgent;\nvar isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端 var music = $('#music')[0];// html的audio获取元素\n\nvar sound = PIXI.sound.Sound.from({// 用pixi-sound载入音乐,用于安卓\nurl: 'music.mp3',\nloop: true\n});\n$('.music-start').on('click', function() {//停止音乐\n$(this).addClass('displayNone');// 对于class的左右可以无视\n$('.music-stop').removeClass('displayNone');\nif(isAndroid) {\n// 安卓\nsound.stop();\n} else {\n// ios\nmusic.pause();\n}\n\n})\n$('.music-stop').on('click', function() {//播放音乐\n$(this).addClass('displayNone');// 对于class的左右可以无视\n$('.music-start').removeClass('displayNone');\nif(isAndroid) {\n// 安卓\nsound.play();\n} else {\n// ios\nmusic.play();\n}\n})\n//初始化执行\nif(isAndroid) {\n// 安卓\nsound.play();\n} else if(isiOS) {\n// ios\n    music.play();\ndocument.addEventListener(\"WeixinJSBridgeReady\", function () {\nmusic.play();\n}, false);\n}\n\n")])])]),s("p",[n._v("文章来源：https://blog.csdn.net/qq_37550593/article/details/124933745")]),n._v(" "),s("backTop")],1)}),[],!1,null,null,null);i.default=t.exports}}]);