(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{372:function(t,s,a){"use strict";a.r(s);var e=a(10),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"electron程序-如何利用appdmg打包生成dmg安装包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#electron程序-如何利用appdmg打包生成dmg安装包"}},[t._v("#")]),t._v(" electron程序，如何利用appdmg打包生成dmg安装包？")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("苏南大叔再次开始更新 "),a("code",[t._v("electron")]),t._v("相关文章，本文种给大家带来的是：如何利用 "),a("code",[t._v("appdmg")]),t._v("生成 "),a("code",[t._v("dmg")]),t._v("安装包。在 "),a("code",[t._v("macos")]),t._v("的世界里面，安装一个文件是非常简单的事情，并没有 "),a("code",[t._v("win")]),t._v("下面哪些繁琐步骤。最常见的安装包格式 "),a("code",[t._v("dmg")]),t._v("，打开就是一个简单界面，把左边的图标拖动到右边的快捷方式上就算安装完成了。对，就是这么简单。那么，对于 "),a("code",[t._v("electron")]),t._v("生成的 "),a("code",[t._v(".app")]),t._v("文件来说，如何才能拥有这样的安装界面呢？这就是本文所要描述的问题。")]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/shang.html"}}),a("a",{attrs:{href:"https://electron.org.cn/next.html",title:"赞助商链接",target:"_blank",rel:"noopener noreferrer"}},[t._v("Electron小伙伴，都在这里等你"),a("OutboundLink")],1)],1),t._v(" "),a("p",[t._v("electron程序，如何利用appdmg打包生成dmg安装包？（图8-1）")]),t._v(" "),a("p",[t._v("本文测试环境："),a("code",[t._v("mac")]),t._v("/"),a("code",[t._v("electron@5.0.3")]),t._v("/"),a("code",[t._v("appdmg0.6.0")]),t._v("。本文特约龙套是 "),a("code",[t._v("electron-quick-start")]),t._v("，用 "),a("code",[t._v("electron-packager")]),t._v("打包成了 "),a("code",[t._v(".app")]),t._v("文件，本文的任务就是把 "),a("code",[t._v(".app")]),t._v("文件再包装成 "),a("code",[t._v(".dmg")]),t._v("文件。本文假设您，已经利用 "),a("code",[t._v("electron-packager")]),t._v("正确打包好了龙套项目的 "),a("code",[t._v(".app")]),t._v("文件。位置信息是:")]),t._v(" "),a("p",[t._v("Bash")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("./electron-quick-start-darwin-x64/electron-quick-start.app\n")])])]),a("h2",{attrs:{id:"全局安装-appdmg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局安装-appdmg"}},[t._v("#")]),t._v(" 全局安装 "),a("code",[t._v("appdmg")])]),t._v(" "),a("p",[a("code",[t._v("appdmg")]),t._v("的 "),a("code",[t._v("github")]),t._v("页面地址如下所示，您可以找到更详细的描述内容：")]),t._v(" "),a("ul",[a("li",[t._v("https://github.com/LinusU/node-appdmg")])]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/shang.html"}}),a("a",{attrs:{href:"https://electron.org.cn/next.html",title:"赞助商链接",target:"_blank",rel:"noopener noreferrer"}},[t._v("Electron小伙伴，都在这里等你"),a("OutboundLink")],1)],1),t._v(" "),a("p",[t._v("electron程序，如何利用appdmg打包生成dmg安装包？（图8-2）")]),t._v(" "),a("p",[t._v("因为 "),a("code",[t._v("appdmg")]),t._v("的角色和 "),a("code",[t._v("electron-packager")]),t._v("的角色类似，所以苏南大叔推荐您使用 "),a("code",[t._v("-g")]),t._v("全局安装 "),a("code",[t._v("appdmg")]),t._v("。命令行如下：")]),t._v(" "),a("p",[t._v("Bash")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" appdmg\n")])])]),a("p",[a("RouterLink",{attrs:{to:"/shang.html"}}),a("a",{attrs:{href:"https://electron.org.cn/next.html",title:"赞助商链接",target:"_blank",rel:"noopener noreferrer"}},[t._v("Electron小伙伴，都在这里等你"),a("OutboundLink")],1)],1),t._v(" "),a("p",[t._v("electron程序，如何利用appdmg打包生成dmg安装包？（图8-3）")]),t._v(" "),a("p",[t._v("可以通过下面的命令，获得 "),a("code",[t._v("appdmg")]),t._v("的版本号。截至到发稿，苏南大叔安装好的 "),a("code",[t._v("appdmg")]),t._v("的版本号是 "),a("code",[t._v("0.6.0")]),t._v("。")]),t._v(" "),a("p",[t._v("Bash")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("appdmg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--version")]),t._v("\n")])])]),a("p",[a("RouterLink",{attrs:{to:"/shang.html"}}),a("a",{attrs:{href:"https://electron.org.cn/next.html",title:"赞助商链接",target:"_blank",rel:"noopener noreferrer"}},[t._v("Electron小伙伴，都在这里等你"),a("OutboundLink")],1)],1),t._v(" "),a("p",[t._v("electron程序，如何利用appdmg打包生成dmg安装包？（图8-4）")]),t._v(" "),a("p",[a("img",{attrs:{src:"Public/upload/20210824/16298157421.png",alt:"苏南大叔：electron程序，如何利用appdmg打包生成dmg安装包？ - appdmg-help",title:"苏南大叔：electron程序，如何利用appdmg打包生成dmg安装包？ - appdmg-help"}}),t._v("Electron小伙伴，都在这里等你")]),t._v(" "),a("p",[t._v("electron程序，如何利用appdmg打包生成dmg安装包？（图8-5）")]),t._v(" "),a("h2",{attrs:{id:"配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[t._v("#")]),t._v(" 配置文件")]),t._v(" "),a("p",[t._v("对于 "),a("code",[t._v("appdmg")]),t._v("生成 "),a("code",[t._v(".dmg")]),t._v("文件这个事情来说，还需要一个 "),a("code",[t._v("json")]),t._v("配置文件。苏南大叔使用的测试配置文件如下：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"title"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MyApp"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"icon"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"icns.icns"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"background"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bg.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"contents"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"x"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("380")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"y"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("170")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"link"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"path"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/Applications"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"x"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"y"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("170")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"file"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"path"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./../electron-quick-start-darwin-x64/electron-quick-start.app"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"window"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"width"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("580")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"height"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("360")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"format"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UDBZ"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"准备文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备文件"}},[t._v("#")]),t._v(" 准备文件")]),t._v(" "),a("p",[t._v("在上述配置中，苏南大叔还需要准备几样文件：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v(".icns")]),t._v("图标文件。制作方式见：https://newsn.net/say/electron-icns.html")]),t._v(" "),a("li",[a("code",[t._v(".app")]),t._v("可执行文件。制作方式可参考：https://newsn.net/say/electron-packager.html")]),t._v(" "),a("li",[a("code",[t._v("bg.png")]),t._v("背景图片，这个图片可以自由设计，建议在合适的位置出现一个箭头，指示大家拖动图标。")])]),t._v(" "),a("h3",{attrs:{id:"目录结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[t._v("#")]),t._v(" 目录结构")]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("electron-quick-start-darwin-x64")]),t._v("的同级目录，建立一个 "),a("code",[t._v("dmg")]),t._v("文件夹，下面放置如下相关文件。目录结构，如下图所示：")]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/shang.html"}}),a("a",{attrs:{href:"https://electron.org.cn/next.html",title:"赞助商链接",target:"_blank",rel:"noopener noreferrer"}},[t._v("Electron小伙伴，都在这里等你"),a("OutboundLink")],1)],1),t._v(" "),a("p",[t._v("electron程序，如何利用appdmg打包生成dmg安装包？（图8-6）")]),t._v(" "),a("h3",{attrs:{id:"数值设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数值设置"}},[t._v("#")]),t._v(" 数值设置")]),t._v(" "),a("p",[t._v("另外，关于上述配置文件中的坐标信息。理论上来说，是需要自己手工不断调整的。不过其实也是有规律可循的。苏南大叔总结了几条规律，仅供参考：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("width")]),t._v("和"),a("code",[t._v("height")]),t._v("就是"),a("code",[t._v("bg.png")]),t._v("的宽度和高度。")]),t._v(" "),a("li",[a("code",[t._v("contents")]),t._v("里面的"),a("code",[t._v("y")]),t._v("，指的就是图标中心点的位置。如果设置高度的一半的话，就可以保证图标在竖直最中间的位置。但是考虑到图标下面的文字信息，所以，可以考虑设置为高度一半，再剪掉一个向上的偏移量。")])]),t._v(" "),a("h3",{attrs:{id:"压缩格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#压缩格式"}},[t._v("#")]),t._v(" 压缩格式")]),t._v(" "),a("p",[t._v("关于参数 "),a("code",[t._v("format")]),t._v("，就是压缩格式了。这里苏南大叔没有做具体测试。因为第一个测试结构，个人就挺满意的。据说还可以 "),a("code",[t._v("format")]),t._v("取值如下：")]),t._v(" "),a("ul",[a("li",[t._v("UDRW - UDIF read/write image")]),t._v(" "),a("li",[t._v("UDRO - UDIF read-only image")]),t._v(" "),a("li",[t._v("UDCO - UDIF ADC-compressed image")]),t._v(" "),a("li",[t._v("UDZO - UDIF zlib-compressed image")]),t._v(" "),a("li",[t._v("UDBZ - UDIF bzip2-compressed image (OS X 10.4+ only)")]),t._v(" "),a("li",[t._v("UFBI - UDIF entire image with MD5 checksum")]),t._v(" "),a("li",[t._v("UDTO - DVD/CD-R master for export")]),t._v(" "),a("li",[t._v("UDSP - SPARSE (grows with content)")]),t._v(" "),a("li",[t._v("UDSB - SPARSEBUNDLE (grows with content; bundle-backed)")])]),t._v(" "),a("h2",{attrs:{id:"生成-dmg命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成-dmg命令"}},[t._v("#")]),t._v(" 生成 "),a("code",[t._v("dmg")]),t._v("命令")]),t._v(" "),a("p",[t._v("命令格式如下：")]),t._v(" "),a("p",[t._v("Bash")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("appdmg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("json文件路径"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("dmg文件路径"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"Public/upload/20210824/16298157422.png",alt:"苏南大叔：electron程序，如何利用appdmg打包生成dmg安装包？ - npm-run-dmg",title:"苏南大叔：electron程序，如何利用appdmg打包生成dmg安装包？ - npm-run-dmg"}}),t._v("Electron小伙伴，都在这里等你")]),t._v(" "),a("p",[t._v("electron程序，如何利用appdmg打包生成dmg安装包？（图8-7）")]),t._v(" "),a("p",[t._v("但是考虑到实际的情况，会反复生成上述 "),a("code",[t._v(".dmg")]),t._v("文件，所以，推荐您设置命令如下：")]),t._v(" "),a("p",[t._v("Bash")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" ./dmg/test.dmg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" appdmg ./dmg/dmg.json ./dmg/test.dmg\n")])])]),a("p",[t._v("可以定义在 "),a("code",[t._v("package.json")]),t._v("里面的 "),a("code",[t._v("script")]),t._v("节点里面，命名为:"),a("code",[t._v("dmg")]),t._v("，便于使用 "),a("code",[t._v("npm run dmg")]),t._v("执行相关命令。")]),t._v(" "),a("h2",{attrs:{id:"使用代码生成-dmg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用代码生成-dmg"}},[t._v("#")]),t._v(" 使用代码生成 "),a("code",[t._v("dmg")])]),t._v(" "),a("h3",{attrs:{id:"基本姿势"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本姿势"}},[t._v("#")]),t._v(" 基本姿势")]),t._v(" "),a("p",[t._v("如果不用命令行，而使用 "),a("code",[t._v("node")]),t._v("代码的话，也是可以生成 "),a("code",[t._v("dmg")]),t._v("的。基本姿势如下：")]),t._v(" "),a("p",[t._v("Js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" appdmg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'appdmg'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ee "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appdmg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("source")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test/appdmg.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test.dmg'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'progress'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// info.current is the current step")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// info.total is the total number of steps")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// info.type is on of 'step-begin', 'step-end'")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'step-begin'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// info.title is the title of the current step")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'step-end'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// info.status is one of 'ok', 'skip', 'fail'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'finish'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// There now is a `test.dmg` file")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// An error occurred")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"可选方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可选方案"}},[t._v("#")]),t._v(" 可选方案")]),t._v(" "),a("p",[t._v("这里主要需要配置的就是 "),a("code",[t._v("ee")]),t._v("对象，其实就是 "),a("code",[t._v("appdmg")]),t._v("的实例。\n方案一，传递 "),a("code",[t._v("json")]),t._v("配置文件和 "),a("code",[t._v("dmg")]),t._v("的路径位置。")]),t._v(" "),a("p",[t._v("Js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ee "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appdmg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("source")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test/appdmg.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test.dmg'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("方案二，传递 "),a("code",[t._v("json")]),t._v("配置文件的内容和 "),a("code",[t._v("dmg")]),t._v("的路径位置。至于 "),a("code",[t._v("basepath")]),t._v("变量，直接忽略即可。")]),t._v(" "),a("p",[t._v("Js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ee "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appdmg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test.dmg'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("basepath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" __dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("specification")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"title"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Test Title"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"执行方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行方式"}},[t._v("#")]),t._v(" 执行方式")]),t._v(" "),a("p",[t._v("执行方式就是：")]),t._v(" "),a("p",[t._v("Bash")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("node")]),t._v(" test.js\n")])])]),a("h2",{attrs:{id:"最终成品"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最终成品"}},[t._v("#")]),t._v(" 最终成品")]),t._v(" "),a("p",[t._v("对于 "),a("code",[t._v("electron-quick-start")]),t._v("这里例子来说，生成的 "),a("code",[t._v("dmg")]),t._v("安装包的实验结果是 "),a("code",[t._v("50m")]),t._v("左右，体积上来说，在可接受的范围内。")]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/shang.html"}},[t._v("Electron小伙伴，都在这里等你")])],1),t._v(" "),a("p",[t._v("electron程序，如何利用appdmg打包生成dmg安装包？（图8-8）")]),t._v(" "),a("blockquote",[a("p",[t._v("在苏南大叔的这几条测试中，这个最顶端的 "),a("code",[t._v("title")]),t._v("是没有显示的。这个 "),a("code",[t._v("issue")]),t._v("在官方的列表中，也没看到描述，也许是苏南大叔自己的系统问题。暂无解决方案。")])]),t._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[t._v("生成 "),a("code",[t._v("dmg")]),t._v("安装包之后，这个安装文件就会显得高大上很多。更多 "),a("code",[t._v("dmg")]),t._v("相关的经验文字，请点击苏南大叔的博客：")]),t._v(" "),a("ul",[a("li",[t._v("https://newsn.net/tag/dmg/")]),t._v(" "),a("li",[t._v("https://newsn.net/tag/electron/")])]),t._v(" "),a("p",[a("img",{attrs:{src:"Public/upload/20210824/16298157433.gif",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"Public/upload/20210824/162981574310.png",alt:""}}),t._v(" 如果本文对您有帮助，或者节约了您的时间，欢迎打赏瓶饮料，建立下友谊关系。\n"),a("img",{attrs:{src:"Public/upload/20210824/16298157431.png",alt:""}}),t._v(" 本博客不欢迎：各种镜像采集行为。请尊重原创文章内容，转载请保留作者链接。")]),t._v(" "),a("p",[a("img",{attrs:{src:"Public/upload/20210824/162981574310.png",alt:""}}),t._v("  【苹果】苹果生态程序员QQ群【787907940】，等您来加入")]),t._v(" "),a("p",[a("img",{attrs:{src:"Public/upload/20210824/162981574310.png",alt:""}}),t._v("  【加群】加入QQ群【175454274】和大家一起讨论这个问题")]),t._v(" "),a("p",[a("img",{attrs:{src:"Public/upload/20210824/16298157439.png",alt:""}}),t._v("  【源码】本文代码片段及相关软件，请点此获取")]),t._v(" "),a("p",[a("img",{attrs:{src:"Public/upload/20210824/16298157436.png",alt:""}}),t._v("  【绝密】秘籍文章入口，仅传授于有缘之人 "),a("img",{attrs:{src:"Public/upload/20210824/16298157433.gif",alt:""}}),t._v("**   electron    dmg**")]),t._v(" "),a("p",[t._v("文章来源：https://newsn.net/say/electron-appdmg.html")]),t._v(" "),a("backTop")],1)}),[],!1,null,null,null);s.default=n.exports}}]);