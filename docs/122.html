<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>quillEditor 图片/视频上传功能及大小链接设置 | 日常收集</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/book/assets/css/0.styles.0575b83d.css" as="style"><link rel="preload" href="/book/assets/js/app.5040eec0.js" as="script"><link rel="preload" href="/book/assets/js/3.0d5fb1e8.js" as="script"><link rel="preload" href="/book/assets/js/22.6cc91e41.js" as="script"><link rel="preload" href="/book/assets/js/4.4c5f7830.js" as="script"><link rel="prefetch" href="/book/assets/js/10.03e42995.js"><link rel="prefetch" href="/book/assets/js/100.6437bccb.js"><link rel="prefetch" href="/book/assets/js/101.5440e694.js"><link rel="prefetch" href="/book/assets/js/102.d066b8fb.js"><link rel="prefetch" href="/book/assets/js/103.60d2cdd2.js"><link rel="prefetch" href="/book/assets/js/104.cc97244d.js"><link rel="prefetch" href="/book/assets/js/105.6bbaec44.js"><link rel="prefetch" href="/book/assets/js/106.c3b4924e.js"><link rel="prefetch" href="/book/assets/js/107.7dcac7a5.js"><link rel="prefetch" href="/book/assets/js/108.bb63280d.js"><link rel="prefetch" href="/book/assets/js/109.7b7f2e3a.js"><link rel="prefetch" href="/book/assets/js/11.44217601.js"><link rel="prefetch" href="/book/assets/js/110.344c349d.js"><link rel="prefetch" href="/book/assets/js/111.ded9790a.js"><link rel="prefetch" href="/book/assets/js/112.536dc07f.js"><link rel="prefetch" href="/book/assets/js/113.d14d5801.js"><link rel="prefetch" href="/book/assets/js/114.33fadcf1.js"><link rel="prefetch" href="/book/assets/js/115.33921643.js"><link rel="prefetch" href="/book/assets/js/116.8b98cc62.js"><link rel="prefetch" href="/book/assets/js/117.57e7cda5.js"><link rel="prefetch" href="/book/assets/js/118.4cca96d1.js"><link rel="prefetch" href="/book/assets/js/119.5af2dd1c.js"><link rel="prefetch" href="/book/assets/js/12.571f12ac.js"><link rel="prefetch" href="/book/assets/js/120.4d8016fe.js"><link rel="prefetch" href="/book/assets/js/121.dc41fffa.js"><link rel="prefetch" href="/book/assets/js/122.60e9d0a0.js"><link rel="prefetch" href="/book/assets/js/123.f0183da7.js"><link rel="prefetch" href="/book/assets/js/124.6982191c.js"><link rel="prefetch" href="/book/assets/js/125.17f3f2f4.js"><link rel="prefetch" href="/book/assets/js/126.5d06ad3c.js"><link rel="prefetch" href="/book/assets/js/127.8a01caf7.js"><link rel="prefetch" href="/book/assets/js/128.833eb16c.js"><link rel="prefetch" href="/book/assets/js/129.ade4c04a.js"><link rel="prefetch" href="/book/assets/js/13.5ef8e835.js"><link rel="prefetch" href="/book/assets/js/130.36067eb9.js"><link rel="prefetch" href="/book/assets/js/131.7486cd20.js"><link rel="prefetch" href="/book/assets/js/132.c9566b96.js"><link rel="prefetch" href="/book/assets/js/133.1a253cb2.js"><link rel="prefetch" href="/book/assets/js/134.fd4dd490.js"><link rel="prefetch" href="/book/assets/js/135.dbe02774.js"><link rel="prefetch" href="/book/assets/js/136.5bbded3d.js"><link rel="prefetch" href="/book/assets/js/137.9b69ce3a.js"><link rel="prefetch" href="/book/assets/js/138.9c610e7f.js"><link rel="prefetch" href="/book/assets/js/139.dccc188d.js"><link rel="prefetch" href="/book/assets/js/14.3d533f57.js"><link rel="prefetch" href="/book/assets/js/140.1eda4021.js"><link rel="prefetch" href="/book/assets/js/141.4d033422.js"><link rel="prefetch" href="/book/assets/js/142.5f3579b5.js"><link rel="prefetch" href="/book/assets/js/143.1c68a47a.js"><link rel="prefetch" href="/book/assets/js/144.95d3b900.js"><link rel="prefetch" href="/book/assets/js/145.89d4d536.js"><link rel="prefetch" href="/book/assets/js/146.9765de5b.js"><link rel="prefetch" href="/book/assets/js/147.c167f141.js"><link rel="prefetch" href="/book/assets/js/148.e4d5f2d7.js"><link rel="prefetch" href="/book/assets/js/149.2c5cedbc.js"><link rel="prefetch" href="/book/assets/js/15.64e47055.js"><link rel="prefetch" href="/book/assets/js/150.a81273ed.js"><link rel="prefetch" href="/book/assets/js/151.438c6f99.js"><link rel="prefetch" href="/book/assets/js/152.153fe68f.js"><link rel="prefetch" href="/book/assets/js/153.ca7c6b6c.js"><link rel="prefetch" href="/book/assets/js/154.fbdafb90.js"><link rel="prefetch" href="/book/assets/js/155.7fb8e83d.js"><link rel="prefetch" href="/book/assets/js/156.7034c74f.js"><link rel="prefetch" href="/book/assets/js/157.3668386c.js"><link rel="prefetch" href="/book/assets/js/158.eb328af9.js"><link rel="prefetch" href="/book/assets/js/159.6a41e30b.js"><link rel="prefetch" href="/book/assets/js/16.21614f1d.js"><link rel="prefetch" href="/book/assets/js/160.337c8dd4.js"><link rel="prefetch" href="/book/assets/js/161.a84f8652.js"><link rel="prefetch" href="/book/assets/js/162.45b1e456.js"><link rel="prefetch" href="/book/assets/js/163.148ee88f.js"><link rel="prefetch" href="/book/assets/js/164.ee34bc8f.js"><link rel="prefetch" href="/book/assets/js/165.b7ab2a0f.js"><link rel="prefetch" href="/book/assets/js/166.fc86defd.js"><link rel="prefetch" href="/book/assets/js/167.bdc1ff67.js"><link rel="prefetch" href="/book/assets/js/168.509f8f50.js"><link rel="prefetch" href="/book/assets/js/169.92f44b0a.js"><link rel="prefetch" href="/book/assets/js/17.b8b34eba.js"><link rel="prefetch" href="/book/assets/js/170.ce2d6156.js"><link rel="prefetch" href="/book/assets/js/171.10104fea.js"><link rel="prefetch" href="/book/assets/js/172.39350c36.js"><link rel="prefetch" href="/book/assets/js/173.cd3709d9.js"><link rel="prefetch" href="/book/assets/js/174.a91c1d49.js"><link rel="prefetch" href="/book/assets/js/175.c4441191.js"><link rel="prefetch" href="/book/assets/js/176.f68468e0.js"><link rel="prefetch" href="/book/assets/js/18.68a1d4d3.js"><link rel="prefetch" href="/book/assets/js/19.323db867.js"><link rel="prefetch" href="/book/assets/js/20.cfa0aec5.js"><link rel="prefetch" href="/book/assets/js/21.6229732b.js"><link rel="prefetch" href="/book/assets/js/23.fb025ad5.js"><link rel="prefetch" href="/book/assets/js/24.36f14df7.js"><link rel="prefetch" href="/book/assets/js/25.eca0455e.js"><link rel="prefetch" href="/book/assets/js/26.cdaab27d.js"><link rel="prefetch" href="/book/assets/js/27.e436033e.js"><link rel="prefetch" href="/book/assets/js/28.9e463677.js"><link rel="prefetch" href="/book/assets/js/29.da1c1051.js"><link rel="prefetch" href="/book/assets/js/30.64a7a28d.js"><link rel="prefetch" href="/book/assets/js/31.5caab6ef.js"><link rel="prefetch" href="/book/assets/js/32.52c8742c.js"><link rel="prefetch" href="/book/assets/js/33.12aba373.js"><link rel="prefetch" href="/book/assets/js/34.75da57c9.js"><link rel="prefetch" href="/book/assets/js/35.ee075cac.js"><link rel="prefetch" href="/book/assets/js/36.b5344dc9.js"><link rel="prefetch" href="/book/assets/js/37.f96e5b12.js"><link rel="prefetch" href="/book/assets/js/38.8ed1081f.js"><link rel="prefetch" href="/book/assets/js/39.0bd213ce.js"><link rel="prefetch" href="/book/assets/js/40.6599c5e0.js"><link rel="prefetch" href="/book/assets/js/41.97b2afb2.js"><link rel="prefetch" href="/book/assets/js/42.f3817fc1.js"><link rel="prefetch" href="/book/assets/js/43.e68b91f3.js"><link rel="prefetch" href="/book/assets/js/44.1ae9f752.js"><link rel="prefetch" href="/book/assets/js/45.053c3252.js"><link rel="prefetch" href="/book/assets/js/46.afa3e05e.js"><link rel="prefetch" href="/book/assets/js/47.c58a3824.js"><link rel="prefetch" href="/book/assets/js/48.3d5aef2d.js"><link rel="prefetch" href="/book/assets/js/49.493683e6.js"><link rel="prefetch" href="/book/assets/js/5.a3244244.js"><link rel="prefetch" href="/book/assets/js/50.c538f846.js"><link rel="prefetch" href="/book/assets/js/51.e4519073.js"><link rel="prefetch" href="/book/assets/js/52.8e4a8eb5.js"><link rel="prefetch" href="/book/assets/js/53.bf8a944f.js"><link rel="prefetch" href="/book/assets/js/54.94af7e7a.js"><link rel="prefetch" href="/book/assets/js/55.3c6a8ec0.js"><link rel="prefetch" href="/book/assets/js/56.4879d74b.js"><link rel="prefetch" href="/book/assets/js/57.a22bdb49.js"><link rel="prefetch" href="/book/assets/js/58.49544dc5.js"><link rel="prefetch" href="/book/assets/js/59.b88afba7.js"><link rel="prefetch" href="/book/assets/js/6.18aff54a.js"><link rel="prefetch" href="/book/assets/js/60.22aa4a5b.js"><link rel="prefetch" href="/book/assets/js/61.0907f36e.js"><link rel="prefetch" href="/book/assets/js/62.5c4d287f.js"><link rel="prefetch" href="/book/assets/js/63.e23f1c3f.js"><link rel="prefetch" href="/book/assets/js/64.3324737d.js"><link rel="prefetch" href="/book/assets/js/65.86da1028.js"><link rel="prefetch" href="/book/assets/js/66.fb8a17cd.js"><link rel="prefetch" href="/book/assets/js/67.f4de38b9.js"><link rel="prefetch" href="/book/assets/js/68.c36038ef.js"><link rel="prefetch" href="/book/assets/js/69.ca13cfb5.js"><link rel="prefetch" href="/book/assets/js/7.637d308b.js"><link rel="prefetch" href="/book/assets/js/70.36531471.js"><link rel="prefetch" href="/book/assets/js/71.0398ac26.js"><link rel="prefetch" href="/book/assets/js/72.593c11c2.js"><link rel="prefetch" href="/book/assets/js/73.95a0d8b1.js"><link rel="prefetch" href="/book/assets/js/74.22068dc5.js"><link rel="prefetch" href="/book/assets/js/75.6fea3cc7.js"><link rel="prefetch" href="/book/assets/js/76.1607821a.js"><link rel="prefetch" href="/book/assets/js/77.90dd4bd2.js"><link rel="prefetch" href="/book/assets/js/78.d30f63dd.js"><link rel="prefetch" href="/book/assets/js/79.d6ca52ed.js"><link rel="prefetch" href="/book/assets/js/8.3201113b.js"><link rel="prefetch" href="/book/assets/js/80.928abd5f.js"><link rel="prefetch" href="/book/assets/js/81.48d40656.js"><link rel="prefetch" href="/book/assets/js/82.cae56c22.js"><link rel="prefetch" href="/book/assets/js/83.f7b8fe61.js"><link rel="prefetch" href="/book/assets/js/84.52d944b4.js"><link rel="prefetch" href="/book/assets/js/85.6f911071.js"><link rel="prefetch" href="/book/assets/js/86.3a2f1dd2.js"><link rel="prefetch" href="/book/assets/js/87.c7a91fbd.js"><link rel="prefetch" href="/book/assets/js/88.cf59763b.js"><link rel="prefetch" href="/book/assets/js/89.d8cafb07.js"><link rel="prefetch" href="/book/assets/js/9.5cf4899a.js"><link rel="prefetch" href="/book/assets/js/90.1bab1d5f.js"><link rel="prefetch" href="/book/assets/js/91.b97f9294.js"><link rel="prefetch" href="/book/assets/js/92.dbae4085.js"><link rel="prefetch" href="/book/assets/js/93.afd1d9c1.js"><link rel="prefetch" href="/book/assets/js/94.a6d57b47.js"><link rel="prefetch" href="/book/assets/js/95.dba426bb.js"><link rel="prefetch" href="/book/assets/js/96.e98dde02.js"><link rel="prefetch" href="/book/assets/js/97.12cc053e.js"><link rel="prefetch" href="/book/assets/js/98.38cf0aaa.js"><link rel="prefetch" href="/book/assets/js/99.3c666611.js"><link rel="prefetch" href="/book/assets/js/vendors~docsearch.c8693219.js">
    <link rel="stylesheet" href="/book/assets/css/0.styles.0575b83d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/book/" class="home-link router-link-active"><!----> <span class="site-name">日常收集</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>dom的事件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>element-ui</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/book/174.html" class="sidebar-link"> element ui 表格动态生成多级表头，可无限嵌套</a></li><li><a href="/book/357.html" class="sidebar-link"> 不想引vue了 所以抄了一遍 el-color-picker</a></li><li><a href="/book/356.html" class="sidebar-link"> 【vue】使用element的select选择器结合Tree树形控件实现下拉树效果</a></li><li><a href="/book/355.html" class="sidebar-link"> el-dialog增加拖动功能</a></li><li><a href="/book/293.html" class="sidebar-link"> 大图预览（点击放大弹出，关闭缩回原位置）</a></li><li><a href="/book/270.html" class="sidebar-link"> 允许批量上传图片组件（分块上传）（带在线裁图）</a></li><li><a href="/book/219.html" class="sidebar-link"> element样式</a></li><li><a href="/book/214.html" class="sidebar-link"> 保留两位小数</a></li><li><a href="/book/181.html" class="sidebar-link"> 在线裁图+分块上传图片 vue组件</a></li><li><a href="/book/177.html" class="sidebar-link"> 分块上传视频 对接ali-oss</a></li><li><a href="/book/176.html" class="sidebar-link"> 分块上传视频 vue组件</a></li><li><a href="/book/152.html" class="sidebar-link">fdsfs</a></li><li><a href="/book/151.html" class="sidebar-link"> el-form表单携带上传的excel文件做提交</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>子文件夹</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/book/149.html" class="sidebar-link"> 文件夹里</a></li><li><a href="/book/144.html" class="sidebar-link"> element-ui Tooltip组件样式修改</a></li><li><a href="/book/122.html" aria-current="page" class="active sidebar-link"> quillEditor 图片/视频上传功能及大小链接设置</a></li><li><a href="/book/121.html" class="sidebar-link"> 上传视频文件组件UploadVideo.vue 基于element-ui</a></li><li><a href="/book/109.html" class="sidebar-link"> 图片上传组件vue+在线裁图 基于element-ui</a></li><li><a href="/book/106.html" class="sidebar-link"> 用于el-table列中显示的多图组件/图片自动铺满显示区域 依赖于el-carousel</a></li><li><a href="/book/36.html" class="sidebar-link">element-form表单验证数值类型字段注意事项</a></li><li><a href="/book/35.html" class="sidebar-link">element-upload上传图片前判断图片尺寸</a></li><li><a href="/book/25.html" class="sidebar-link">element自定义验证</a></li><li><a href="/book/24.html" class="sidebar-link">element动态表格字段验证</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Qcanvas</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>linux</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/book/365.html" class="sidebar-link"> WASM 在动画引擎中的设计优化</a></li><li><a href="/book/364.html" class="sidebar-link"> 你管这破玩意叫指针？</a></li><li><a href="/book/362.html" class="sidebar-link"> 图说 WebAssembly</a></li><li><a href="/book/328.html" class="sidebar-link"> 从哲学层面浅谈计算机学习方法论</a></li><li><a href="/book/324.html" class="sidebar-link"> 微信游览器，解决安卓和ios自动播放音乐</a></li><li><a href="/book/323.html" class="sidebar-link"> CSS3 animation属性中的steps功能符深入介绍</a></li><li><a href="/book/322.html" class="sidebar-link"> 前端搞工程化：从零打造性能检测库「源码 + 视频」</a></li><li><a href="/book/321.html" class="sidebar-link"> 还在看那些老掉牙的性能优化文章么？这些最新性能指标了解下</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/book/301.html" class="sidebar-link">从App store下载App的不同版本ipa文件----很多东西也不是越新越好，比如APP——在 iPhone 上尤其如此</a></li><li><a href="/book/294.html" class="sidebar-link">迟子建老师的《一坛猪油》</a></li><li><a href="/book/288.html" class="sidebar-link">文本文档的协同编辑实现</a></li><li><a href="/book/287.html" class="sidebar-link">再见，整洁代码</a></li><li><a href="/book/286.html" class="sidebar-link"> 可以在 Nginx 中运行 JavaScript，厉害了！</a></li><li><a href="/book/284.html" class="sidebar-link"> word中批量调整图片大小</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>electron打包的一些问题</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/book/274.html" class="sidebar-link"> 文件分片代码</a></li><li><a href="/book/273.html" class="sidebar-link"> 重学 JS：为啥 await 不能用在 forEach 中详解</a></li><li><a href="/book/269.html" class="sidebar-link"> Excel函数之王，Vlookup到底怎么用？</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mysql</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/book/248.html" class="sidebar-link"> 《提问的智慧》精读注解版</a></li><li><a href="/book/199.html" class="sidebar-link"> js监听div的resize事件</a></li><li><a href="/book/198.html" class="sidebar-link"> 引入第三方字体体积太大的问题</a></li><li><a href="/book/195.html" class="sidebar-link"> 多行溢出省略号显示（css/js）实现！</a></li><li><a href="/book/190.html" class="sidebar-link">今天带大家一起来看看下，如何实现“划词高亮”功能。</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Canvas</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工作中解决的疑难问题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/book/135.html" class="sidebar-link"> 深夜，我偷听到程序员要对session下手</a></li><li><a href="/book/132.html" class="sidebar-link"> 读 《深入浅出webpack》</a></li><li><a href="/book/103.html" class="sidebar-link"> 一道被人轻视的前端面试题</a></li><li><a href="/book/101.html" class="sidebar-link">部分前端面试题参考答案</a></li><li><a href="/book/80.html" class="sidebar-link">SVGDeveloper制作矢量地图教程详解</a></li><li><a href="/book/76.html" class="sidebar-link">VisualStudio2010创建的WCF（.dll）服务第一个应用</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="quilleditor-图片-视频上传功能及大小链接设置"><a href="#quilleditor-图片-视频上传功能及大小链接设置" class="header-anchor">#</a> quillEditor 图片/视频上传功能及大小链接设置</h1> <p><img src="Public/upload/2020-11-13/202011131025565621.png" alt="5fadeeb07837b.png"></p> <p>Editor.vue</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
	&lt;div ref=&quot;cn&quot; class=&quot;editor&quot; @mousemove=&quot;mousemove($event)&quot;&gt;

		&lt;quill-editor  :ref=&quot;id&quot; placeholder=&quot;请输入停车场使用规范&quot; v-model=&quot;editorContent&quot; :options=&quot;editorOption_cn&quot; @change=&quot;change&quot;&gt;
				&lt;/quill-editor&gt;

				&lt;!-- 中文插入图片 --&gt;
		&lt;VueQuillUpload
		:class=&quot;id&quot;
		style=&quot;display: none&quot;
		v-bind:quill-updateImg.sync=&quot;quillUpdateImg_cn&quot;
		v-bind:editor-quill.sync = &quot;quill_cn&quot;
		&gt;&lt;/VueQuillUpload&gt;


		&lt;VueQuillUploadVideo
		v-bind:is-show.sync=&quot;VueQuillUploadVideoVisible&quot; 
		v-bind:editor-quill.sync = &quot;quill_cn&quot;

		&gt;&lt;/VueQuillUploadVideo&gt;

		&lt;ImgTip 
		v-bind:position-left=&quot;positionLeft&quot;
		v-bind:position-top=&quot;positionTop&quot;
		v-bind:img-obj=&quot;imgOrIframe&quot;
		v-bind:editor-content.sync=&quot;editorContent&quot;
		v-bind:editor-quill.sync = &quot;quill_cn&quot;

		&gt;&lt;/ImgTip&gt;
	&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
	import VueQuillUpload from './VueQuillUpload.vue';
	import VueQuillUploadVideo from './VueQuillUploadVideo.vue';
	import ImgTip from './ImgTip.vue';




	import { quillEditor } from 'vue-quill-editor'
// import Quill from 'quill'  // 引入编辑器
// 	import ImageResize from 'quill-image-resize-module';
//  Quill.register('modules/imageResize',ImageResize)


	import 'quill/dist/quill.core.css'
	import 'quill/dist/quill.snow.css'
	import 'quill/dist/quill.bubble.css'

	export default{
		components:{
			quillEditor,
			VueQuillUpload,
			VueQuillUploadVideo,
			ImgTip
		},
		props:['editorContent'],
		data(){
			return {
				quillUpdateImg_cn:false,
				imgOrIframe:null,
				quill_cn:{},
				editorOption_cn: { 
					placeholder: '请输入内容',
				     modules: {
				      toolbar: 

				       {
                            container: [// 工具栏
						        ['bold', 'italic', 'underline', 'strike','link','image','video'],
						        // ['blockquote'],
						        [{ 'list': 'ordered' }, { 'list': 'bullet' }],
						        // [{ 'script': 'sub' }, { 'script': 'super' }],
						        [{ 'indent': '-1' }, { 'indent': '+1' }],
						        [{ 'size': ['small', false, 'large', 'huge'] }],
						        [{ 'color': [] }, { 'background': [] }],
						        // ['clean'],
						        [{ 'align': [] }],  
						        ['fullscreen'] 


						      ],

                            handlers: {
                                'image': function (value) {
                                    if (value) {

                                    	// VueQuillUpload组件
                                    	document.querySelector('.'+this.id+' .avatar-uploader input').click()
                                        // document.querySelector('#quill-upload input').click()
                                    } else {
                                        this.quill.format('image', false);
                                    }
                                },
                                'video': (value)=&gt; {
                                	if(value){

		                              	this.VueQuillUploadVideoVisible = true;

                                	}else{
                                        this.quill.format('video', false);


                                	}
	                            }
                            }
                        },
                        // imageResize:{
                        //     displayStyles:{
                        //         backgroundColor:'black',
                        //         border:'none',
                        //         color:'white'
                        //     },
                        //     modules:['Resize','DisplaySize','Toolbar']
                        // }
					 }
				},
				VueQuillUploadVideoVisible:false,
				ImgTipVisible:false,
				positionLeft:0,
				positionTop:0,
				content:''
			}
		},
		methods:{ 

			change:function(){ 
				this.$nextTick(()=&gt;{

					this.$emit('update:editorContent',this.editorContent);

				})
			},
			getElementLeft: function(element,className){
			　　　　var actualLeft = element.offsetLeft;
			　　　　var current = element.offsetParent;

			　　　　while (current !== null){
			　　　　　　actualLeft += current.offsetLeft;
			　　　　　　current = current.offsetParent;

					 if(current.className != className){
						  	break;
						  }
			　　　　}

			　　　　return actualLeft;
			},
			getElementTop:function(element,className){

		　　　　var actualTop = element.offsetTop;
		　　　　var current = element.offsetParent;

		　　　　while (current !== null){ 

		　　　　　　actualTop += current.offsetTop;
		　　　　　　current = current.offsetParent;

				  if(current.className != className){
				  	break;
				  }

		　　　　}

		　　　　return actualTop;
		　　},
			//生成图片设置工具
			createHandler:function(){
				// console.log(scrollTop)

				//计算图片this.imgOrIframe距 editor的距离  

				if(this.imgOrIframe !==  null){
					this.positionLeft =  this.getElementLeft(this.imgOrIframe,'editor');
					this.positionTop =  this.getElementTop(this.imgOrIframe,'editor')-document.getElementsByClassName('ql-editor')[0].scrollTop;
					 

				}else{
					this.ImgTipVisible = false
				}
 


			},
			mousemove:function(event){
 
				if(this.imgOrIframe === null){
						if(event.target.tagName.toLowerCase() == 'img' || 
							event.target.tagName.toLowerCase() == 'iframe' ){
 
							console.log('图片或iframe');
							this.imgOrIframe = event.target;
							// this.createHandler();


						}
				}else if(
					(event.target.tagName.toLowerCase() == 'img' || 
					event.target.tagName.toLowerCase() == 'iframe') &amp;&amp; 
					this.imgOrIframe.getAttribute('src') != event.target.src){

					this.imgOrIframe = event.target;
					console.log('换图或iframe了');
					// this.createHandler();

				}

				this.$nextTick(this.createHandler) 



			}
		},
		mounted(){

			this.quill_cn = this.$refs[this.id].quill;

			this.$nextTick(()=&gt;{

				this.quill_cn.container.firstChild.onscroll = ()=&gt;{
					this.imgOrIframe = null;
				}

			})

		},
		created(){

		},
		computed:{

		},
		watch:{ 

		}
	}

&lt;/script&gt;
&lt;style scoped&gt;
	.editor{
		position:relative;
		padding-bottom: 60px;
		overflow: hidden;
	}
&lt;/style&gt;
&lt;style&gt;

	.editor .ql-toolbar.ql-snow{
		border: 1px solid #DCDFE6;
		border-top-left-radius: 4px;
		border-top-right-radius: 4px;

	}
	.editor .ql-container.ql-snow{
		border: 1px solid #DCDFE6;
		border-bottom-left-radius: 4px;
		border-bottom-right-radius: 4px;
	}
	.editor .ql-editor.ql-blank::before {
	    color: rgba(165, 160, 160, 0.6);
	    content: attr(data-placeholder);
	    font-style: normal;
	    left: 15px;
	    pointer-events: none;
	    position: absolute;
	    right: 15px;
	}
	.editor .quill-editor{
		height: 400px; 
	}
	.editor .ql-editor p{
		margin-bottom: 10px;
	}
	.editor .ql-editor .ql-video{
	/*	width: 660px;
		height: 508px;*/
		margin:0 auto;
		overflow: hidden;
	}
&lt;/style&gt;

</code></pre></div><p>VueQuillUpload.vue</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
	&lt;div&gt;
		&lt;el-upload ref=&quot;upload&quot;
                class=&quot;avatar-uploader&quot;
                action=&quot;/admin/file/uploadFile?module=dc_video&quot;
				limit=&quot;1&quot; 
				:auto-upload=&quot;true&quot; 
                name=&quot;file&quot;
                :headers=&quot;header&quot;
                :show-file-list=&quot;false&quot;
                :on-success=&quot;uploadSuccess&quot;
                :on-error=&quot;uploadError&quot;
                :before-upload=&quot;beforeUpload&quot;
                accept=&quot;image/png,image/jpeg,image/gif&quot;&gt;
        &lt;/el-upload&gt;
	&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
	export default{
		props:['editorQuill','quillUpdateImg'],
		data(){
			return {

			}
		},
		methods:{
			// 富文本图片上传前
            beforeUpload() {
                // 显示loading动画
                this.quillUpdateImg = true
            },
  
            uploadSuccess(res, file) {
                // res为图片服务器返回的数据
                // 获取富文本组件实例
                // let quill = this.$refs.myQuillEditor.quill; 
  
                let quill = this.editorQuill;

                // 如果上传成功
                if (res.code === '00') {
                    // 获取光标所在位置
                    let length = quill.getSelection().index;
                    // 插入图片  res.info为服务器返回的图片地址
                    // quill.insertEmbed(length, 'image', res.info)
                    quill.insertEmbed(length, 'image', res.obj)


                    // 调整光标到最后
                    quill.setSelection(length + 1)

                    this.$refs.upload.clearFiles();



                } else {
                    this.$message.error('图片插入失败')
                }
                // loading动画消失
                this.quillUpdateImg = false
            },
   
            // 富文本图片上传失败
            uploadError() {
                // loading动画消失
                this.quillUpdateImg = false
                this.$message.error('图片插入失败')
            }
		}
	}
&lt;/script&gt;
</code></pre></div><p>VueQuillUploadVideo.vue</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
	&lt;div&gt;
		&lt;el-dialog
		    title=&quot;视频上传&quot;
		    :visible.sync=&quot;show&quot;
		    width=&quot;30%&quot;
		    @close=&quot;close&quot;&gt;

		    &lt;el-form :model=&quot;form&quot; :rules=&quot;formRules&quot; ref=&quot;form&quot; class=&quot;p-t-10&quot;&gt;
		        &lt;el-form-item label=&quot;&quot; prop=&quot;url&quot; class=&quot;p-b-10&quot;&gt;
		            &lt;el-input size=&quot;small&quot; v-model=&quot;form.url&quot; placeholder=&quot;请输入视频地址&quot;&gt;
		  
		            	&lt;template slot=&quot;append&quot;&gt;
		            		&lt;el-upload ref=&quot;upload&quot;
								action=&quot;/admin/file/uploadVideoFile?module=dc_video&quot;
								accept=&quot;.mov,.mp4,.m4a,.3gp,.3g2&quot;
								:show-file-list=&quot;false&quot;
								:on-success=&quot;handleVideoSuccess&quot;
								:before-upload=&quot;handleBeforeUpload&quot;
								:on-error=&quot;handleUploadError&quot;
							&gt;
								&lt;el-button size=&quot;small&quot; type=&quot;primary&quot; icon=&quot;el-icon-upload2&quot; :loading=&quot;upLoaidng&quot;&gt;上传视频&lt;/el-button&gt;
							&lt;/el-upload&gt;
		            	&lt;/template&gt;
		            &lt;/el-input&gt;
		        &lt;/el-form-item&gt;
		        &lt;el-form-item&gt;
		            &lt;el-button size=&quot;small&quot; @click=&quot;close&quot;&gt;取消&lt;/el-button&gt;
		            &lt;el-button size=&quot;small&quot; type=&quot;primary&quot; @click=&quot;onSubmit&quot;&gt;提交&lt;/el-button&gt;
		        &lt;/el-form-item&gt;
		    &lt;/el-form&gt;
		&lt;/el-dialog&gt;
	&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
	export default{
		components:{},
		props:['editorQuill','isShow'],
		data(){
			return {
				show:false,
				form:{
					url:''
				},
				formRules:{
					url:[
						{ required: true, message: '请输入视频地址或上传视频！', trigger: 'blur' },
					]
				},
				upLoaidng:false
			}
		},
		methods:{
			close:function(){
				this.$emit('update:isShow',false);
			},
			handleBeforeUpload() {
				this.upLoaidng = true;
				return true;
			},
			handleVideoSuccess(res, file) {
				this.upLoaidng = false;
				let { code, msg, obj } = res;
				if (code == '00') {
					let urls = obj.split('#');
					this.form.url = urls[0]; 
					this.$message({
						type: 'success',
						message: '上传成功',
					});


					this.$nextTick(()=&gt;{
						this.$refs.form.validateField('url');
					}) 


				} else {
					this.$message({
						type: 'warning',
						message: msg,
					});
				}
			},
			insertVideo:function(url){
				let quill = this.editorQuill;
				console.log(quill);
                console.log(quill.getSelection());

                console.log(quill.selection.savedRange.index);
 
                // 获取光标所在位置 
               let length = quill.getSelection() !==null? quill.getSelection().index: quill.selection.savedRange.index

                // 插入图片  res.info为服务器返回的图片地址
                // quill.insertEmbed(length, 'image', res.info)
                quill.insertEmbed(length, 'video', url);


                // 调整光标到最后
                quill.setSelection(length + 1)

                this.$refs.upload.clearFiles();

 

			},
			onSubmit:function(){

				this.$refs.form.validate(valid=&gt;{

					if(valid){

						// this.callBack &amp;&amp; this.callBack(this.form.url);

						this.insertVideo(this.form.url);

						this.form.url = '';

						this.$nextTick(()=&gt;{

							this.close();

						})
					}

				})
			}
		},
		mounted(){ 
		},
		created(){

		},
		computed:{

		},
		watch:{
			'isShow':function(v){
				this.show = v;
			}
		}
	}

&lt;/script&gt;
&lt;style scoped&gt;

&lt;/style&gt;
</code></pre></div><p>ImgTip.vue</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
	&lt;div&gt;
		&lt;i class=&quot;el-icon-setting tip&quot; @click=&quot;openSetting&quot; title=&quot;设置&quot; 
		v-if=&quot;imgObj!== null &amp;&amp; positionTop&gt;30&quot;
		v-bind:style=&quot;{
			'left':positionLeft+10+'px',
			'top':positionTop+10+'px'
		}&quot;
		&gt;&lt;/i&gt;


		&lt;el-dialog
		    title=&quot;设置&quot;
		    :visible.sync=&quot;show&quot;
		    width=&quot;30%&quot;
		    @close=&quot;close&quot; :append-to-body=&quot;true&quot;&gt;
		    &lt;el-form :model=&quot;form&quot; :rules=&quot;formRules&quot; ref=&quot;form&quot; label-width=&quot;100px&quot; class=&quot;p-t-0&quot;&gt;
		    	 &lt;el-tabs v-model=&quot;activeName&quot;  class=&quot;p-t-0 p-l-10 p-r-10&quot;&gt;
				    &lt;el-tab-pane label=&quot;尺寸&quot; name=&quot;first&quot;&gt;
					      &lt;el-row :gutter=&quot;0&quot;&gt;
			            &lt;el-col :span=&quot;12&quot; class=&quot;padding&quot;&gt;
					        &lt;el-form-item label=&quot;宽：&quot; prop=&quot;width&quot;&gt;
								&lt;el-input size=&quot;small&quot; v-model=&quot;form.width&quot; placeholder=&quot;&quot; @input=&quot;wInput&quot;&gt;&lt;/el-input&gt;
					        &lt;/el-form-item&gt;
			       
			            &lt;/el-col&gt;
			            &lt;el-col :span=&quot;12&quot;  class=&quot;padding&quot;&gt;
			                 &lt;el-form-item label=&quot;高：&quot; prop=&quot;height&quot;&gt;
								&lt;el-input size=&quot;small&quot; v-model=&quot;form.height&quot; placeholder=&quot;&quot;  @input=&quot;hInput&quot;&gt;&lt;/el-input&gt;
					        &lt;/el-form-item&gt;
			            &lt;/el-col&gt;
			        &lt;/el-row&gt;

				    &lt;/el-tab-pane&gt;
				    &lt;el-tab-pane label=&quot;链接&quot; name=&quot;second&quot;  :disabled=&quot;type=='iframe'&quot;&gt;
				    	&lt;el-row :gutter=&quot;0&quot;&gt;
			            	&lt;el-col :span=&quot;24&quot; &gt;

				    	 &lt;el-form-item label=&quot;链接地址：&quot; prop=&quot;link&quot;&gt;
								&lt;el-input size=&quot;small&quot; v-model=&quot;form.link&quot; placeholder=&quot;&quot;&gt;&lt;/el-input&gt;
					        &lt;/el-form-item&gt;
					    &lt;/el-col&gt;
				            &lt;el-col :span=&quot;24&quot; &gt;

					        &lt;el-form-item label=&quot;打开方式：&quot; prop=&quot;target&quot;&gt;
								&lt;el-select size=&quot;small&quot; v-model=&quot;form.target&quot; placeholder=&quot;&quot;&gt;
								    &lt;el-option v-for=&quot;item in targetList&quot;
								        :key=&quot;item.value&quot;
								        :label=&quot;item.label&quot;
								        :value=&quot;item.value&quot;&gt;
								    &lt;/el-option&gt;
								&lt;/el-select&gt;
					        &lt;/el-form-item&gt;
					    &lt;/el-col&gt;
					&lt;/el-row&gt;
				    &lt;/el-tab-pane&gt; 
				  &lt;/el-tabs&gt;
		  
		        &lt;el-form-item&gt;
		            &lt;el-button size=&quot;small&quot; @click=&quot;close&quot;&gt;取消&lt;/el-button&gt;
		            &lt;el-button size=&quot;small&quot; type=&quot;primary&quot; @click=&quot;onSubmit&quot;&gt;修改&lt;/el-button&gt;
		        &lt;/el-form-item&gt;
		    &lt;/el-form&gt;
		&lt;/el-dialog&gt;
	&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
	export default{
		components:{},
		props:['positionLeft','positionTop','imgObj','editorContent','editorQuill'],
		data(){
			return {
				aimObj:null,
				show:false,
				form:{
					width:0,
					height:0,
					link:'',
				},
				formRules:{
					width:[
						{ required: true, message: '请图片宽度', trigger: 'blur' },
					],
					height:[
						{ required: true, message: '请图片高度', trigger: 'blur' },
					]
				},
				rate:1,

				targetList:[
					{
						label:'当前页',
						value:'_self'
					},
					{
						label:'新页打开',
						value:'_blank'
		
					}
				],
				activeName:'first',
				type:'img'
			}
		},
		methods:{
			wInput:function(){
				this.$nextTick(()=&gt;{

					if(this.form.width.replace(/ /g,'') == ''){

						return false;
					}

				if(this.imgObj.tagName.toLowerCase() == 'img'){
						this.form = {
							...this.form,
							...{
								width:this.form.width.replace(/[^\d]/g,''),
								height:parseInt(this.form.width.replace(/[^\d]/g,'')*1/this.rate)
							}
						}
				}


			

				})
			},
			hInput:function(){
				this.$nextTick(()=&gt;{

					if(this.form.height.replace(/ /g,'') == ''){

						return false;
					}

				if(this.imgObj.tagName.toLowerCase() == 'img'){

					this.form = {
						...this.form,
						...{
							width:parseInt(this.form.height.replace(/[^\d]/g,'')*1*this.rate),
							height:this.form.height.replace(/[^\d]/g,'')
						}
					}
				}

				})
			},


			openSetting:function(){ 

				if(this.imgObj == null){
					return false;
				}


				if(this.imgObj.tagName.toLowerCase() == 'iframe'){

					var h = this.imgObj.offsetHeight
					var w = this.imgObj.offsetWidth;
				}else{

					var w = this.imgObj.width;
					var h = this.imgObj.height;
				}
				 

				this.rate = w/h;
 

				this.form = {
					...this.form,
					...{

						width:w,
						height:h
					}
				}

				this.show = true

			},
			close:function(){
				this.show = false;
			},
			onSubmit:function(){

				this.$refs.form.validate(valid=&gt;{

					if(valid){
 

						// this.imgObj.style.width = this.form.width+'px';
						// this.imgObj.style.height = this.form.height+'px';

						(this.type =='iframe') &amp;&amp; (_=&gt;{

							this.imgObj.setAttribute('width',this.form.width*1);
							this.imgObj.setAttribute('height',this.form.height*1);
						})()

						(this.type =='img') &amp;&amp; 
						this.imgObj.setAttribute('width',this.form.width);
						// this.imgObj.setAttribute('height',this.form.height);

						(this.type =='img') &amp;&amp; 
						this.createAParent();

						// console.log(this.editorQuill.getContents());
						this.$emit('update:editorContent',this.editorQuill.container.firstChild.innerHTML);

						this.close();

					}
				})
			},
			 domToString:function(node) {  
			     let tmpNode = document.createElement('div')
			     tmpNode.appendChild(node) 
			     let str = tmpNode.innerHTML
			     tmpNode = node = null; // 解除引用，以便于垃圾回收  
			     return str;  
			},
			createAParent:function(){
				var parent = this.imgObj.parentNode;

				if(this.form.link.replace(/ /g,'') !=''){
				   if(parent.tagName.toLowerCase() == 'a'){ //有链接
				   		parent.setAttribute('href',this.form.link);
				   		parent.setAttribute('target',this.form.target);

					}else{

					//如果没有a 则创建
					console.log('如果没有a 则创建'); 

					var a = document.createElement('a');
			        a.href=this.form.link;
			        a.target = this.form.target==''?'_self':this.form.target;
			        this.imgObj.parentNode.replaceChild(a,this.imgObj);
			        a.appendChild(this.imgObj);


					}
	
				}else{

				   if(parent.tagName.toLowerCase() == 'a'){ //有链接

					//清掉父 a标签 
					this.imgObj.parentNode.parentNode.insertBefore(this.imgObj.cloneNode(true),this.imgObj.parentNode);
				    this.imgObj.parentNode.parentNode.removeChild(this.imgObj.parentNode);

				   }

	

				}
			},
			getUrlOfImg:function(){ 
			   var parent = this.imgObj.parentNode;

			   if(parent.tagName.toLowerCase() == 'a'){ //有链接
			   		this.form = {
			   			...this.form,
			   			...{
			   				link: parent.getAttribute('href'),
			   				target:parent.getAttribute('target')?parent.getAttribute('target'):'_self'
			   			}
			   		};

			   }else{

			   	this.form = {
			   		...this.form,
			   		...{
			   			link:'',
			   			target:''
			   		}
			   	}
			   }

			}

		},
		mounted(){

		},
		created(){

		},
		computed:{

		},
		watch:{
			'show':function(v){
				if(v){ 
					this.activeName = 'first';
					this.getUrlOfImg();
					if(this.imgObj.tagName.toLowerCase() == 'img'){
						this.type ='img'
					}else{
						this.type ='iframe';
					}
 
				}
			}
		}
	}

&lt;/script&gt;
&lt;style scoped&gt;
	.tip{
		position: absolute; 
		color:#E6A23C;
		font-size: 20px;
		font-weight: bold;
		cursor: pointer;
	}

&lt;/style&gt;

</code></pre></div><!----></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/book/144.html" class="prev">
         element-ui Tooltip组件样式修改
      </a></span> <span class="next"><a href="/book/121.html">
         上传视频文件组件UploadVideo.vue 基于element-ui
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><section class="side-anchor"><ul style="display:none;"></ul></section></div></div>
    <script src="/book/assets/js/app.5040eec0.js" defer></script><script src="/book/assets/js/3.0d5fb1e8.js" defer></script><script src="/book/assets/js/22.6cc91e41.js" defer></script><script src="/book/assets/js/4.4c5f7830.js" defer></script>
  </body>
</html>
